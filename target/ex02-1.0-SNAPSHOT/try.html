<!DOCTYPE html><html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Index</title>
    <style>
        .text{
            text-align: left;
        }
        .design {
            font-family: \"Times New Roman\", Times, serif;
            height:150px;
        }
        #home {
            width:1600px;
            height:400px;
        }
    </style>
    <script src="validation.js">
    </script>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-12" style="text-align: left">
        <div class="design">
            <h1>Answers</h1>
            <p> + db.getQuestions().get(questionNumber) </p>
            <form action="dbManager" method="post">
            <div class="form-group">
                <label for="usr">Name:</label>
                <input type="text" class="form-control" id="usr" name="usr">
            </div>
            <!--<div class="form-group">
                <label for="ans">Answer:</label>
                <input type="textarea" class="form-control" id="ans" name="ans">
            </div>-->
                <div class="form-group">
                <label for="ans">Answer:</label>
                <textarea class="form-control" rows="5" id="ans" name="ans"></textarea>
            </div>

                <li class= "list-group-item"> <p class="alert alert-info"> db.getQuestions().get(i) </p> db.getNumOfAnswers(i) Answer <button type="submit" class="btn btn-secondary" name="questionNumber" value="  i " >Answer</button>
                <button type="button" data-id=" i " style="display:block" style="margin: 3px"  class="btn btn-secondary" name="Show answers">Show answers</button><ul id="ans i " style="display:block"></ul></li>


                <button type="submit" class="btn btn-secondary" name="add">Add</button>
                <a href="/"> <button a href style="margin: 3px" type=" button " class="btn btn-secondary">Cancel</button></a>
            </form>
        </div>
        </div>
    </div>
</div>
</body>
</html>


out.println("<script>document.addEventListener('DOMContentLoaded', function() {\n" +
    "    let list = document.getElementsByName(\"Show answers\");\n" +
    "    for(let i=0; i<list.length; i++) {\n" +
    "        list[i].addEventListener(\"click\", button);\n" +
    "    };\n" +
    "}, false);\n" +
    "\n" +
    "function button() {\n" +
    "    let index = this.dataset.id;\n" +
    "    fetch(\"JsonServlet?\" + \"questionNumber=\" + index, {\n" +
    "        method: 'get',\n" +
    "        headers: {\n" +
    "            'Content-Type': 'application/json'\n" +
    "        }\n" +
    "    })\n" +
    "        .then(ans => ans.json())\n" +
    "        .then(answers => {\n" +
    "            let str = \"\";\n" +
    "            str += \"<button style=\\\"margin: 3px\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\" name=\\\"Hide answers\\\">Hide answers</button>\";" +
    "            for (const answersKey in answers)\n" +
    "                str += \"<li>Author: \" + answers[answersKey].Name + \"Answer: \" + answers[answersKey].Answer + \"</li>\";\n" +
    "            document.getElementById(\"ans\" + index).innerHTML = str;\n" +
    "            document.getElementById(\"ans\" + index).style.display=\"block\" ;\n" +
    "            document.getElementById(\"Show answers\" + index).style.display=\"none\" ;\n" +
    "        })\n" +
    "}\n" +
    "function hiden() {\n" +
    "    let index = this.dataset.id;\n" +
    "    document.getElementById(\"ans\" + index).style.display=\"none\" ;\n" +
    "};</script>");